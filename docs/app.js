/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/draw.ts":
/*!*********************!*\
  !*** ./src/draw.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"draw\": () => (/* binding */ draw)\n/* harmony export */ });\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state */ \"./src/state.ts\");\n/* harmony import */ var _sounds__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sounds */ \"./src/sounds.ts\");\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\n\n\nvar drawDebugInfo = function () {\n    var debugData = __spreadArrays([\n        \"state:    \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.state,\n        \"speed:    \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.speed.toFixed(3),\n        \"mobile:   \" + _state__WEBPACK_IMPORTED_MODULE_0__.isMobile,\n        \"scale:    \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth.toFixed(1),\n        \"screen:   \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.width + \" x \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.height,\n        \"test-age: \" + ((_state__WEBPACK_IMPORTED_MODULE_0__.game.test ? _state__WEBPACK_IMPORTED_MODULE_0__.game.tick - _state__WEBPACK_IMPORTED_MODULE_0__.game.test.created : 0) / 1000.0).toFixed(1),\n        \"length:   \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.maxWormLength.toFixed(1)\n    ], (_state__WEBPACK_IMPORTED_MODULE_0__.game.worm.map(function (_a, i) {\n        var x = _a.x, y = _a.y;\n        return (i === 0 ? \"worm:    \" : \"         \") + \" [\" + i + \"] \" + x.toFixed(0) + \" : \" + y.toFixed(0);\n    })));\n    var lineHeight = 18;\n    var y = 40;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"16px courier\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"hanging\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(128, 128, 128, 128)\";\n    for (var _i = 0, debugData_1 = debugData; _i < debugData_1.length; _i++) {\n        var line = debugData_1[_i];\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillText(line, 20, y);\n        y += lineHeight;\n    }\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawWorm = function () {\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineJoin = \"round\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineCap = \"round\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = _state__WEBPACK_IMPORTED_MODULE_0__.game.state === \"run\" ? \"#ff00ff\" : \"#770077\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n    var worm = _state__WEBPACK_IMPORTED_MODULE_0__.game.worm;\n    var head = worm[0];\n    if (head)\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.moveTo(head.x, head.y);\n    for (var i = 1; i < worm.length; i++) {\n        var _a = worm[i], x = _a.x, y = _a.y;\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(x, y);\n    }\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar PI = Math.PI;\nvar PIx2 = PI * 2.0;\nvar PIp2 = PI * 0.5;\nvar PIp4 = PI * 0.25;\nvar textWidth = function (text) { return _state__WEBPACK_IMPORTED_MODULE_0__.ctx.measureText(text).width; };\nvar drawCenterText = function (x, y, text) { return _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillText(text, x - (textWidth(text) * 0.5), y); };\nvar drawTest = function () {\n    var test = _state__WEBPACK_IMPORTED_MODULE_0__.game.test, wormWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth, width = _state__WEBPACK_IMPORTED_MODULE_0__.game.width;\n    if (!test)\n        return;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = (wormWidth * 1.2).toFixed(1) + \"px PressStart\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"middle\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = _state__WEBPACK_IMPORTED_MODULE_0__.game.state === \"run\" ? \"#ffffff\" : \"#777777\";\n    drawCenterText(width * 0.5, wormWidth, test.question);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = (wormWidth * 0.8).toFixed(1) + \"px sans-serif\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = _state__WEBPACK_IMPORTED_MODULE_0__.game.state === \"run\" ? \"#ffffff\" : \"#777777\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = _state__WEBPACK_IMPORTED_MODULE_0__.game.state === \"run\" ? \"#ffffff\" : \"#777777\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineWidth = 2;\n    test.options.forEach(function (_a) {\n        var name = _a.name, _b = _a.position, x = _b.x, y = _b.y;\n        var offX = _state__WEBPACK_IMPORTED_MODULE_0__.ctx.measureText(name).width * 0.5;\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillText(name, x - offX, y);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.arc(x, y, _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth, 0, PIx2, false);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n    });\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawScore = function () {\n    var wormWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth, points = _state__WEBPACK_IMPORTED_MODULE_0__.game.points;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = (wormWidth * 1.2).toFixed(1) + \"px PressStart\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"middle\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = _state__WEBPACK_IMPORTED_MODULE_0__.game.state === \"run\" ? \"#50ff50\" : \"#207720\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillText(\"Pisteet: \" + points, wormWidth, wormWidth);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawPaused = function (ts) {\n    var alpha = 1 - (Math.abs((ts % 2000) - 1000) / 1000), x = _state__WEBPACK_IMPORTED_MODULE_0__.game.width * 0.5, yd = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth * 1.6;\n    var y = _state__WEBPACK_IMPORTED_MODULE_0__.game.height / 2 - (yd * 2);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"32px PressStart\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"hanging\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(255, 255, 255, \" + alpha + \")\";\n    drawCenterText(x, y, \"paused\");\n    y += yd;\n    y += yd;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"26px PressStart\";\n    drawCenterText(x, y, \"press space or click\");\n    y += yd;\n    drawCenterText(x, y, \"to continue\");\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawGameOver = function (ts) {\n    var alpha = 1 - (Math.abs((ts % 2000) - 1000) / 1000), x = _state__WEBPACK_IMPORTED_MODULE_0__.game.width * 0.5, yd = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth * 1.8;\n    var y = _state__WEBPACK_IMPORTED_MODULE_0__.game.height / 2 - (yd * 4);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"32px PressStart\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"hanging\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(127, 255, 127, \" + alpha + \")\";\n    drawCenterText(x, y, \"game over\");\n    y += yd;\n    y += yd;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(127, 255, 212, \" + alpha + \")\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"48px PressStart\";\n    drawCenterText(x, y, \"Sait \" + _state__WEBPACK_IMPORTED_MODULE_0__.game.points + \" pistett\\u00E4\");\n    y += yd;\n    y += yd;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(127, 255, 127, \" + alpha + \")\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"26px PressStart\";\n    if (_state__WEBPACK_IMPORTED_MODULE_0__.isMobile) {\n        drawCenterText(x, y, \"Aloita uusi peli painamalla\");\n        y += yd;\n        drawCenterText(x, y, \"ohjaimen keskeltä.\");\n    }\n    else {\n        drawCenterText(x, y, \"Aloita uusi peli painamalla\");\n        y += yd;\n        drawCenterText(x, y, \"välilyöntiä.\");\n    }\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawNewDesktop = function (ts) {\n    var alpha = 1 - (Math.abs((ts % 2000) - 1000) / 1000), x = _state__WEBPACK_IMPORTED_MODULE_0__.game.width * 0.5, yd = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth * 1.6;\n    var y = _state__WEBPACK_IMPORTED_MODULE_0__.game.height / 2 - (yd * 6);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"hanging\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"32px PressStart\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(127, 255, 127, \" + alpha + \")\";\n    drawCenterText(x, y, \"Matikka-Mato\");\n    y += yd;\n    y += yd;\n    y += yd;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgb(127, 255, 212)\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"16px PressStart\";\n    drawCenterText(x, y, \"Ohjaa mato oikean vastauksen luo.\");\n    y += yd;\n    drawCenterText(x, y, \"Älä törmaa seinään tai matoon.\");\n    y += yd;\n    y += yd;\n    drawCenterText(x, y, \"Ohjaa matoa nuoli-näppäimillä.\");\n    y += yd;\n    drawCenterText(x, y, \"Aloita peli välilyönnillä.\");\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawNewMobile = function (ts) {\n    var alpha = 1 - (Math.abs((ts % 2000) - 1000) / 1000), x = _state__WEBPACK_IMPORTED_MODULE_0__.game.width * 0.5, yd = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth * 1.6;\n    var y = _state__WEBPACK_IMPORTED_MODULE_0__.game.height / 2 - (yd * 6);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.textBaseline = \"hanging\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"32px PressStart\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgba(127, 255, 127, \" + alpha + \")\";\n    drawCenterText(x, y, \"Matikka-Mato\");\n    y += yd;\n    y += yd;\n    y += yd;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = \"rgb(127, 255, 212)\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.font = \"16px PressStart\";\n    drawCenterText(x, y, \"Ohjaa matoa oikean vastauksen luo.\");\n    y += yd;\n    drawCenterText(x, y, \"Älä törmaa seinään tai matoon.\");\n    y += yd;\n    y += yd;\n    drawCenterText(x, y, \"Ohjaa matoa koskettamalla ohjainta.\");\n    y += yd;\n    drawCenterText(x, y, \"Aloita peli ohjaimen keskeltä.\");\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawPauseControl = function () {\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillRect(-0.3, -0.6, 0.2, 1.2);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillRect(0.1, -0.6, 0.2, 1.2);\n};\nvar drawPlayControl = function () {\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.moveTo(-0.3, -0.5);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.6, 0);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(-0.3, 0.5);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.closePath();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fill();\n};\nvar drawControlFunc = function () {\n    var r = _state__WEBPACK_IMPORTED_MODULE_0__.control.r, x = _state__WEBPACK_IMPORTED_MODULE_0__.control.x, y = _state__WEBPACK_IMPORTED_MODULE_0__.control.y, selected = _state__WEBPACK_IMPORTED_MODULE_0__.control.selected, fill = \"rgba(255, 255, 255, 0.05)\", stroke = \"rgba(255, 255, 255, 0.1)\", selectedFill = \"rgba(255, 255, 255, 0.7)\", selectedStroke = \"rgba(255, 255, 255, 1)\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.translate(x, y);\n    for (var i = 0; i < 4; i++) {\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = i === selected ? selectedFill : fill;\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = i === selected ? selectedStroke : stroke;\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.arc(0, 0, r, PI + PIp4, PIx2 - PIp4, false);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.arc(0, 0, r * 0.4, PIx2 - PIp4, PI + PIp4, true);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.closePath();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fill();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.rotate(PIp2);\n    }\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.scale(r * 0.4, r * 0.4);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = fill;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = stroke;\n    if (_state__WEBPACK_IMPORTED_MODULE_0__.game.state === \"run\") {\n        drawPauseControl();\n    }\n    else {\n        drawPlayControl();\n    }\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar drawControl = _state__WEBPACK_IMPORTED_MODULE_0__.isMobile ? drawControlFunc : function () { };\nvar drawMiscControls = function () {\n    var width = _state__WEBPACK_IMPORTED_MODULE_0__.game.width, wormWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth;\n    var onStroke = \"rgba(0, 255, 0, 1)\", onFill = \"rgba(0, 192, 0, 1)\", offStroke = \"rgba(64, 128, 64, 1)\";\n    // Sound on/off\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.translate(width - (wormWidth * 3), wormWidth);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.scale(2 * wormWidth, 2 * wormWidth);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineWidth = 0.08;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineJoin = \"round\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = (0,_sounds__WEBPACK_IMPORTED_MODULE_1__.isSound)() ? onStroke : offStroke;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = onFill;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.moveTo(0.1, 0.35);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.3, 0.35);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.55, 0.15);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.55, 0.85);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.3, 0.65);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.1, 0.65);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.closePath();\n    if ((0,_sounds__WEBPACK_IMPORTED_MODULE_1__.isSound)())\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fill();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.arc(0.5, 0.5, 0.3, -1, 1, false);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.arc(0.5, 0.5, 0.45, -1, 1, false);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n    // Fullscreen\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.save();\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.translate(width - (wormWidth * 2), 4.5 * wormWidth);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.scale(wormWidth, wormWidth);\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineWidth = 0.08;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineJoin = \"round\";\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = onStroke;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.fillStyle = onFill;\n    for (var i = 0; i < 4; i++) {\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.beginPath();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.moveTo(1.1, 0);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.8, 0.3);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.8, 0.2);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.4, 0.2);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.4, -0.2);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.8, -0.2);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.lineTo(0.8, -0.3);\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.closePath();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.stroke();\n        _state__WEBPACK_IMPORTED_MODULE_0__.ctx.rotate(PIp2);\n    }\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.restore();\n};\nvar draw = function (ts) {\n    var width = _state__WEBPACK_IMPORTED_MODULE_0__.game.width, height = _state__WEBPACK_IMPORTED_MODULE_0__.game.height, state = _state__WEBPACK_IMPORTED_MODULE_0__.game.state;\n    _state__WEBPACK_IMPORTED_MODULE_0__.ctx.clearRect(0, 0, width, height);\n    switch (state) {\n        case \"new\":\n            if (_state__WEBPACK_IMPORTED_MODULE_0__.isMobile) {\n                drawNewMobile(ts);\n            }\n            else {\n                drawNewDesktop(ts);\n            }\n            drawMiscControls();\n            break;\n        case \"run\":\n            drawWorm();\n            drawScore();\n            drawTest();\n            break;\n        case \"paused\":\n            drawScore();\n            drawPaused(ts);\n            break;\n        case \"game-over\":\n            drawWorm();\n            drawTest();\n            drawGameOver(ts);\n            break;\n    }\n    drawControl();\n    if ((0,_state__WEBPACK_IMPORTED_MODULE_0__.isDebug)())\n        drawDebugInfo();\n};\n\n\n//# sourceURL=webpack://matikka-mato/./src/draw.ts?");

/***/ }),

/***/ "./src/geom.ts":
/*!*********************!*\
  !*** ./src/geom.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"distancer\": () => (/* binding */ distancer),\n/* harmony export */   \"distanceToLine\": () => (/* binding */ distanceToLine),\n/* harmony export */   \"onSegment\": () => (/* binding */ onSegment),\n/* harmony export */   \"COLINEAR\": () => (/* binding */ COLINEAR),\n/* harmony export */   \"CLOCKWISE\": () => (/* binding */ CLOCKWISE),\n/* harmony export */   \"COUNTER_CLOCKWISE\": () => (/* binding */ COUNTER_CLOCKWISE),\n/* harmony export */   \"orientation\": () => (/* binding */ orientation),\n/* harmony export */   \"intersect\": () => (/* binding */ intersect)\n/* harmony export */ });\nvar distancer = function (_a) {\n    var ax = _a.x, ay = _a.y;\n    return function (_a) {\n        var bx = _a.x, by = _a.y;\n        var dx = ax - bx, dy = ay - by;\n        return Math.sqrt((dx * dx) + (dy * dy));\n    };\n};\nvar distanceToLine = function (line, e) {\n    var a = line[0], b = line[1], ab = { x: b.x - a.x, y: b.y - a.y }, be = { x: e.x - b.x, y: e.y - b.y }, ae = { x: e.x - a.x, y: e.y - a.y }, ab_be = ab.x * be.x + ab.y * be.y, ab_ae = ab.x * ae.x + ab.y * ae.y;\n    if (ab_be > 0) {\n        var y = e.y - b.y, x = e.x - b.x;\n        return Math.sqrt(x * x + y * y);\n    }\n    if (ab_ae < 0) {\n        var y = e.y - a.y, x = e.x - a.x;\n        return Math.sqrt(x * x + y * y);\n    }\n    var x1 = ab.x, y1 = ab.y, x2 = ae.x, y2 = ae.y;\n    return Math.abs(x1 * y2 - y1 * x2) / Math.sqrt(x1 * x1 + y1 * y1);\n};\n// Given three colinear points a, b, c, the function checks if\n// point b lies on line segment 'a-c':\nvar onSegment = function (a, b, c) {\n    return b.x <= Math.max(a.x, c.x) &&\n        b.x >= Math.min(a.x, c.x) &&\n        b.y <= Math.max(a.y, c.y) &&\n        b.y >= Math.min(a.y, c.y);\n};\n// To find orientation of ordered triplet (a, b, c).\n// The function returns following values\n// 0 --> a, b and c are colinear\n// 1 --> Clockwise\n// 2 --> Counterclockwise\n// See https://www.geeksforgeeks.org/orientation-3-ordered-points/\nvar COLINEAR = 0, CLOCKWISE = 1, COUNTER_CLOCKWISE = 2;\nvar orientation = function (a, b, c) {\n    var val = ((b.y - a.y) * (c.x - b.x)) - ((b.x - a.x) * (c.y - b.y));\n    return (val === 0) ? COLINEAR : (val > 0) ? CLOCKWISE : COUNTER_CLOCKWISE;\n};\n// The function that returns true if line segment 'a1-a2' and 'b1-b2' intersect:\nvar intersect = function (a1, a2) { return function (b1, b2) {\n    var o1 = orientation(a1, a2, b1), o2 = orientation(a1, a2, b2), o3 = orientation(b1, b2, a1), o4 = orientation(b1, b2, a2);\n    // General case\n    if (o1 !== o2 && o3 !== o4)\n        return true;\n    // Special Cases:\n    // a1, a2 and b1 are colinear and b1 lies on segment a1-a2\n    if (o1 === 0 && onSegment(a1, b1, a2))\n        return true;\n    // a1, a2 and b2 are colinear and b2 lies on segment a1-a2\n    if (o2 === 0 && onSegment(a1, b2, a2))\n        return true;\n    // b1, b2 and a1 are colinear and a1 lies on segment b1-b2\n    if (o3 === 0 && onSegment(b1, a1, b2))\n        return true;\n    // b1, b2 and a2 are colinear and a2 lies on segment b1-b2\n    if (o4 === 0 && onSegment(b1, a2, b2))\n        return true;\n    return false; // Doesn't fall in any of the above cases\n}; };\n\n\n//# sourceURL=webpack://matikka-mato/./src/geom.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/types.ts\");\n/* harmony import */ var _test__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./test */ \"./src/test.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./state */ \"./src/state.ts\");\n/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./draw */ \"./src/draw.ts\");\n/* harmony import */ var _move__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./move */ \"./src/move.ts\");\n/* harmony import */ var _sounds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sounds */ \"./src/sounds.ts\");\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n\n\n\nvar initGame = function () {\n    var x = _state__WEBPACK_IMPORTED_MODULE_2__.game.width * 0.5, y = _state__WEBPACK_IMPORTED_MODULE_2__.game.height * 0.5;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.state = \"new\";\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.maxWormLength = 300;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.worm = [{ x: x, y: y }, { x: x, y: y }];\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.heading = 0;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.speed = 0.07 * (_state__WEBPACK_IMPORTED_MODULE_2__.game.width / 1200);\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.test = _test__WEBPACK_IMPORTED_MODULE_1__.makeTest();\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.points = 0;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.level = 0;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.tick = 0;\n};\nvar turnHeading = [\n    /* ...Up: */ [_types__WEBPACK_IMPORTED_MODULE_0__.UP, _types__WEBPACK_IMPORTED_MODULE_0__.RIGHT, _types__WEBPACK_IMPORTED_MODULE_0__.UP, _types__WEBPACK_IMPORTED_MODULE_0__.LEFT],\n    /* Right: */ [_types__WEBPACK_IMPORTED_MODULE_0__.UP, _types__WEBPACK_IMPORTED_MODULE_0__.RIGHT, _types__WEBPACK_IMPORTED_MODULE_0__.DOWN, _types__WEBPACK_IMPORTED_MODULE_0__.RIGHT],\n    /* .Down: */ [_types__WEBPACK_IMPORTED_MODULE_0__.DOWN, _types__WEBPACK_IMPORTED_MODULE_0__.RIGHT, _types__WEBPACK_IMPORTED_MODULE_0__.DOWN, _types__WEBPACK_IMPORTED_MODULE_0__.LEFT],\n    /* .Left: */ [_types__WEBPACK_IMPORTED_MODULE_0__.UP, _types__WEBPACK_IMPORTED_MODULE_0__.LEFT, _types__WEBPACK_IMPORTED_MODULE_0__.DOWN, _types__WEBPACK_IMPORTED_MODULE_0__.LEFT],\n];\nvar turn = function (direction) {\n    var state = _state__WEBPACK_IMPORTED_MODULE_2__.game.state, heading = _state__WEBPACK_IMPORTED_MODULE_2__.game.heading;\n    if (state !== \"run\")\n        return;\n    var newHeading = turnHeading[heading][direction];\n    if (newHeading !== heading) {\n        _state__WEBPACK_IMPORTED_MODULE_2__.game.heading = newHeading;\n        _state__WEBPACK_IMPORTED_MODULE_2__.game.worm.unshift(__assign({}, _state__WEBPACK_IMPORTED_MODULE_2__.game.worm[0]));\n    }\n};\nvar run = function () {\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.tick = 0;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.state = \"run\";\n};\nvar pause = function () {\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.state = \"paused\";\n};\nvar spaceKeyAction = {\n    \"new\": run,\n    \"run\": pause,\n    \"paused\": run,\n    \"game-over\": initGame,\n};\ndocument.addEventListener(\"keydown\", function (e) {\n    var code = e.code, repeat = e.repeat;\n    if (repeat)\n        return;\n    switch (code) {\n        case \"ArrowUp\":\n            e.preventDefault();\n            return turn(_types__WEBPACK_IMPORTED_MODULE_0__.UP);\n        case \"ArrowRight\":\n            e.preventDefault();\n            return turn(_types__WEBPACK_IMPORTED_MODULE_0__.RIGHT);\n        case \"ArrowDown\":\n            e.preventDefault();\n            return turn(_types__WEBPACK_IMPORTED_MODULE_0__.DOWN);\n        case \"ArrowLeft\":\n            e.preventDefault();\n            return turn(_types__WEBPACK_IMPORTED_MODULE_0__.LEFT);\n        case \"Space\":\n            e.preventDefault();\n            return spaceKeyAction[_state__WEBPACK_IMPORTED_MODULE_2__.game.state]();\n        case \"Escape\":\n            e.preventDefault();\n            return initGame();\n        case \"KeyD\":\n            e.preventDefault();\n            return (0,_state__WEBPACK_IMPORTED_MODULE_2__.toggleDebug)();\n        default:\n            console.log(\"key: \" + code + \" (\" + repeat + \")\");\n    }\n});\nvar controlButtonAction = {\n    \"new\": run,\n    \"run\": pause,\n    \"paused\": run,\n    \"game-over\": initGame,\n};\nvar controlButton = function () {\n    controlButtonAction[_state__WEBPACK_IMPORTED_MODULE_2__.game.state]();\n};\nvar controlEvent = function (tx, ty) {\n    var width = _state__WEBPACK_IMPORTED_MODULE_2__.game.width, wormWidth = _state__WEBPACK_IMPORTED_MODULE_2__.game.wormWidth;\n    var x = _state__WEBPACK_IMPORTED_MODULE_2__.control.x, y = _state__WEBPACK_IMPORTED_MODULE_2__.control.y, r = _state__WEBPACK_IMPORTED_MODULE_2__.control.r, dx = _state__WEBPACK_IMPORTED_MODULE_2__.control.dx, dy = _state__WEBPACK_IMPORTED_MODULE_2__.control.dy;\n    var sx = tx - dx, sy = ty - dy, cx = sx - x, cy = sy - y, pauseR = r * 0.2;\n    var miscCtrlX1 = width - (wormWidth * 3), miscCtrlX2 = miscCtrlX1 + wormWidth, soundY1 = wormWidth, soundY2 = soundY1 + (2 * wormWidth), fullscreenY1 = 4.5 * wormWidth, fullscreenY2 = fullscreenY1 + (2 * wormWidth);\n    //console.log(sx.toFixed(0), sy.toFixed(0))\n    //console.log(miscCtrlX1.toFixed(0), miscCtrlX2.toFixed(0))\n    if ((sx >= miscCtrlX1) && (sx <= miscCtrlX2)) {\n        if ((sy >= soundY1) && (sy <= soundY2)) {\n            (0,_sounds__WEBPACK_IMPORTED_MODULE_5__.toggleSound)();\n            return;\n        }\n        if ((sy >= fullscreenY1) && (sy <= fullscreenY2)) {\n            console.log(\"fullscreen!\", Date.now());\n            return;\n        }\n    }\n    if ((Math.abs(cx) > r) || Math.abs(cy) > r) {\n        _state__WEBPACK_IMPORTED_MODULE_2__.control.tx = null;\n        _state__WEBPACK_IMPORTED_MODULE_2__.control.ty = null;\n        _state__WEBPACK_IMPORTED_MODULE_2__.control.selected = null;\n        return;\n    }\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.tx = tx - dx;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.ty = ty - dy;\n    if ((Math.abs(cy) < pauseR) && (Math.abs(cx) < pauseR)) {\n        _state__WEBPACK_IMPORTED_MODULE_2__.control.selected = null;\n        controlButton();\n        return;\n    }\n    if (Math.abs(cy) < Math.abs(cx)) {\n        _state__WEBPACK_IMPORTED_MODULE_2__.control.selected = cx < 0 ? 3 : 1;\n    }\n    else {\n        _state__WEBPACK_IMPORTED_MODULE_2__.control.selected = cy < 0 ? 0 : 2;\n    }\n    turn(_state__WEBPACK_IMPORTED_MODULE_2__.control.selected);\n};\nvar touch = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var t = e.touches[0], x = t === null || t === void 0 ? void 0 : t.clientX, y = t === null || t === void 0 ? void 0 : t.clientY;\n    if (x && y)\n        controlEvent(x, y);\n};\nvar controlClear = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.tx = null;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.ty = null;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.selected = null;\n};\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"touchstart\", touch);\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"touchmove\", touch);\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"touchend\", controlClear);\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"mousedown\", function (e) {\n    e.preventDefault();\n    controlEvent(e.clientX, e.clientY);\n});\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"mouseup\", controlClear);\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"mouseout\", controlClear);\n_state__WEBPACK_IMPORTED_MODULE_2__.canvas.addEventListener(\"mouseleave\", controlClear);\nvar resize = function () {\n    var width = _state__WEBPACK_IMPORTED_MODULE_2__.canvas.clientWidth, height = _state__WEBPACK_IMPORTED_MODULE_2__.canvas.clientHeight, cbr = _state__WEBPACK_IMPORTED_MODULE_2__.canvas.getBoundingClientRect(), wormWidth = width * 0.02;\n    _state__WEBPACK_IMPORTED_MODULE_2__.canvas.width = width;\n    _state__WEBPACK_IMPORTED_MODULE_2__.canvas.height = height;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.width = width;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.height = height;\n    _state__WEBPACK_IMPORTED_MODULE_2__.game.wormWidth = wormWidth;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.r = height * 0.2;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.x = width - _state__WEBPACK_IMPORTED_MODULE_2__.control.r - wormWidth;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.y = height - _state__WEBPACK_IMPORTED_MODULE_2__.control.r - wormWidth;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.dx = cbr.left + 4;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.dy = cbr.top + 4;\n    _state__WEBPACK_IMPORTED_MODULE_2__.control.selected = null;\n};\nwindow.addEventListener(\"resize\", resize);\nvar gameLoop = function (ts) {\n    if (_state__WEBPACK_IMPORTED_MODULE_2__.game.tick === 0)\n        _state__WEBPACK_IMPORTED_MODULE_2__.game.tick = ts;\n    if (_state__WEBPACK_IMPORTED_MODULE_2__.game.state === \"run\")\n        (0,_move__WEBPACK_IMPORTED_MODULE_4__.move)(ts);\n    (0,_draw__WEBPACK_IMPORTED_MODULE_3__.draw)(ts);\n    window.requestAnimationFrame(gameLoop);\n};\nvar init = function () {\n    resize();\n    initGame();\n    window.requestAnimationFrame(gameLoop);\n};\nwindow.requestAnimationFrame(init);\n\n\n//# sourceURL=webpack://matikka-mato/./src/index.ts?");

/***/ }),

/***/ "./src/move.ts":
/*!*********************!*\
  !*** ./src/move.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"move\": () => (/* binding */ move)\n/* harmony export */ });\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state */ \"./src/state.ts\");\n/* harmony import */ var _sounds__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sounds */ \"./src/sounds.ts\");\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./geom */ \"./src/geom.ts\");\n/* harmony import */ var _test__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./test */ \"./src/test.ts\");\n\n\n\n\nvar moveWorm = function (td) {\n    var worm = _state__WEBPACK_IMPORTED_MODULE_0__.game.worm, heading = _state__WEBPACK_IMPORTED_MODULE_0__.HEADING[_state__WEBPACK_IMPORTED_MODULE_0__.game.heading], speed = _state__WEBPACK_IMPORTED_MODULE_0__.game.speed, head = worm[0], x = head.x, y = head.y, wormWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth, reach = wormWidth / 2, maxLen = _state__WEBPACK_IMPORTED_MODULE_0__.game.maxWormLength;\n    var len = 0, nx = x + (heading.x * speed * td), ny = y + (heading.y * speed * td);\n    head.x = nx;\n    head.y = ny;\n    // Hit border wall?\n    if ((nx < reach) || (nx > _state__WEBPACK_IMPORTED_MODULE_0__.game.width - reach) || (ny < reach) || (ny > _state__WEBPACK_IMPORTED_MODULE_0__.game.height - reach)) {\n        _sounds__WEBPACK_IMPORTED_MODULE_1__.crash();\n        _state__WEBPACK_IMPORTED_MODULE_0__.game.state = \"game-over\";\n        return;\n    }\n    // Run onto itself?\n    var a1 = worm[0], a2 = worm[1], a0 = {\n        x: a1.x + (heading.x * wormWidth),\n        y: a1.y + (heading.y * wormWidth),\n    }, cross = (0,_geom__WEBPACK_IMPORTED_MODULE_2__.intersect)(a0, a2);\n    for (var i = 3; i < worm.length; i++) {\n        var b1 = worm[i - 1], b2 = worm[i];\n        if (cross(b1, b2)) {\n            _sounds__WEBPACK_IMPORTED_MODULE_1__.crash();\n            _state__WEBPACK_IMPORTED_MODULE_0__.game.state = \"game-over\";\n            return;\n        }\n    }\n    // Keep max-len under limit:\n    for (var i = 1; i < worm.length; i++) {\n        var last = worm[i], x_1 = last.x, y_1 = last.y, dx = nx - x_1, dy = ny - y_1;\n        len += Math.abs(dx) + Math.abs(dy);\n        if (len > maxLen) {\n            var over = maxLen - len;\n            if (dx !== 0)\n                last.x += over * (dx > 0 ? -1 : +1);\n            if (dy !== 0)\n                last.y += over * (dy > 0 ? -1 : +1);\n            worm.splice(i + 1);\n            break;\n        }\n        nx = x_1;\n        ny = y_1;\n    }\n};\nvar hitCorrect = function (test, option, i) {\n    _sounds__WEBPACK_IMPORTED_MODULE_1__.chaching();\n    _state__WEBPACK_IMPORTED_MODULE_0__.game.points += 1;\n    _state__WEBPACK_IMPORTED_MODULE_0__.game.speed *= 1.06;\n    _state__WEBPACK_IMPORTED_MODULE_0__.game.maxWormLength *= 1.07;\n    _state__WEBPACK_IMPORTED_MODULE_0__.game.test = (0,_test__WEBPACK_IMPORTED_MODULE_3__.makeTest)();\n    console.log(\"correct:\", ((_state__WEBPACK_IMPORTED_MODULE_0__.game.tick - test.created) / 1000.0).toFixed(1));\n};\nvar hitWrong = function (test, option, i) {\n    var _a;\n    _sounds__WEBPACK_IMPORTED_MODULE_1__.squeak();\n    (_a = _state__WEBPACK_IMPORTED_MODULE_0__.game.test) === null || _a === void 0 ? void 0 : _a.options.splice(i, 1);\n};\nvar checkTest = function (ts) {\n    var wormWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth, test = _state__WEBPACK_IMPORTED_MODULE_0__.game.test, worm = _state__WEBPACK_IMPORTED_MODULE_0__.game.worm;\n    if (!test)\n        return;\n    var options = test.options, dist = (0,_geom__WEBPACK_IMPORTED_MODULE_2__.distancer)(worm[0]), margin = wormWidth * 1.5, optIndex = options.findIndex(function (_a) {\n        var position = _a.position;\n        return dist(position) < margin;\n    }), option = options[optIndex];\n    if (option) {\n        if (option.correct) {\n            hitCorrect(test, option, optIndex);\n        }\n        else {\n            hitWrong(test, option, optIndex);\n        }\n    }\n};\nvar move = function (ts) {\n    var td = ts - _state__WEBPACK_IMPORTED_MODULE_0__.game.tick;\n    _state__WEBPACK_IMPORTED_MODULE_0__.game.tick = ts;\n    moveWorm(td);\n    checkTest(ts);\n};\n\n\n//# sourceURL=webpack://matikka-mato/./src/move.ts?");

/***/ }),

/***/ "./src/sounds.ts":
/*!***********************!*\
  !*** ./src/sounds.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"crash\": () => (/* binding */ crash),\n/* harmony export */   \"squeak\": () => (/* binding */ squeak),\n/* harmony export */   \"chaching\": () => (/* binding */ chaching),\n/* harmony export */   \"isSound\": () => (/* binding */ isSound),\n/* harmony export */   \"toggleSound\": () => (/* binding */ toggleSound)\n/* harmony export */ });\nvar sound = false;\nvar audioData = [];\nvar audioInit = false;\nvar makeAudio = function (name) {\n    var audio = new Audio();\n    audioData.push([audio, \"sounds/\" + name + \".mp3\"]);\n    return function () {\n        console.log(\"playing\", name, sound);\n        if (sound) {\n            audio.play().catch(function (err) { return console.error(err); });\n        }\n    };\n};\nvar crash = makeAudio(\"crash\");\nvar squeak = makeAudio(\"squeak\");\nvar chaching = makeAudio(\"chaching\");\nvar isSound = function () { return sound; };\nvar toggleSound = function () {\n    if (!audioInit) {\n        // This must happen in click handler\n        audioData.forEach(function (_a) {\n            var audio = _a[0], src = _a[1];\n            return audio.src = src;\n        });\n        audioInit = true;\n    }\n    sound = !sound;\n};\n\n\n//# sourceURL=webpack://matikka-mato/./src/sounds.ts?");

/***/ }),

/***/ "./src/state.ts":
/*!**********************!*\
  !*** ./src/state.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isDebug\": () => (/* binding */ isDebug),\n/* harmony export */   \"toggleDebug\": () => (/* binding */ toggleDebug),\n/* harmony export */   \"canvas\": () => (/* binding */ canvas),\n/* harmony export */   \"ctx\": () => (/* binding */ ctx),\n/* harmony export */   \"isMobile\": () => (/* binding */ isMobile),\n/* harmony export */   \"HEADING\": () => (/* binding */ HEADING),\n/* harmony export */   \"game\": () => (/* binding */ game),\n/* harmony export */   \"control\": () => (/* binding */ control),\n/* harmony export */   \"isFullscreen\": () => (/* binding */ isFullscreen)\n/* harmony export */ });\nvar debug = new URLSearchParams(window.location.search).get(\"debug\") === \"true\";\nvar isDebug = function () { return debug; };\nvar toggleDebug = function () { return debug = !debug; };\nvar canvas = document.getElementById(\"game\");\nvar ctx = canvas.getContext(\"2d\");\nvar isMobile = \"ontouchstart\" in document.documentElement;\nvar HEADING = [\n    { x: 0, y: -1 },\n    { x: +1, y: 0 },\n    { x: 0, y: +1 },\n    { x: -1, y: 0 },\n];\nvar game = {\n    state: \"paused\",\n    width: 0,\n    height: 0,\n    wormWidth: 0,\n    maxWormLength: 0,\n    worm: [],\n    heading: 0,\n    speed: 0,\n    test: null,\n    points: 0,\n    level: 0,\n    tick: 0,\n};\nvar control = {\n    x: 0,\n    y: 0,\n    r: 0,\n    dx: 0,\n    dy: 0,\n    selected: null,\n    tx: null,\n    ty: null,\n};\nvar fullscreen = false;\nvar isFullscreen = function () { return fullscreen; };\n\n\n//# sourceURL=webpack://matikka-mato/./src/state.ts?");

/***/ }),

/***/ "./src/test.ts":
/*!*********************!*\
  !*** ./src/test.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"makeTest\": () => (/* binding */ makeTest)\n/* harmony export */ });\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state */ \"./src/state.ts\");\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geom */ \"./src/geom.ts\");\n\n\nvar randomPointMaker = function () {\n    var width = _state__WEBPACK_IMPORTED_MODULE_0__.game.width, height = _state__WEBPACK_IMPORTED_MODULE_0__.game.height, worm = _state__WEBPACK_IMPORTED_MODULE_0__.game.worm, wormWidth = _state__WEBPACK_IMPORTED_MODULE_0__.game.wormWidth;\n    var makePoint = function () {\n        var x = Math.random() * (width - (wormWidth * 4)) + (wormWidth * 2), y = Math.random() * (height - (wormWidth * 4)) + (wormWidth * 2);\n        return { x: x, y: y };\n    }, margin = wormWidth * 3, points = [worm[0]], ok = function (p) {\n        var dist = (0,_geom__WEBPACK_IMPORTED_MODULE_1__.distancer)(p);\n        return points.every(function (op) { return dist(op) > margin; });\n    };\n    return function () {\n        while (true) {\n            var p = makePoint();\n            if (ok(p)) {\n                points.push(p);\n                return p;\n            }\n        }\n    };\n};\nvar wrongNumberMaker = function (correct) { return function () {\n    var r = function () { return 1 + Math.floor(Math.random() * 10); };\n    while (true) {\n        var n = r();\n        if (n !== correct)\n            return n;\n    }\n}; };\nvar makeTest = function () {\n    var options = [], count = 3 + Math.round(Math.random() * 3), randomPoint = randomPointMaker(), a = 1 + Math.floor(Math.random() * 5), b = 1 + Math.floor(Math.random() * 5), c = a + b, wrongNumber = wrongNumberMaker(c);\n    options.push({\n        name: c.toString(10),\n        correct: true,\n        position: randomPoint(),\n    });\n    for (var i = 0; i < count; i++) {\n        options.push({\n            name: wrongNumber().toString(10),\n            correct: false,\n            position: randomPoint(),\n        });\n    }\n    return {\n        question: a + \" + \" + b,\n        answer: \"\" + c,\n        created: _state__WEBPACK_IMPORTED_MODULE_0__.game.tick,\n        options: options,\n    };\n};\n\n\n//# sourceURL=webpack://matikka-mato/./src/test.ts?");

/***/ }),

/***/ "./src/types.ts":
/*!**********************!*\
  !*** ./src/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UP\": () => (/* binding */ UP),\n/* harmony export */   \"RIGHT\": () => (/* binding */ RIGHT),\n/* harmony export */   \"DOWN\": () => (/* binding */ DOWN),\n/* harmony export */   \"LEFT\": () => (/* binding */ LEFT)\n/* harmony export */ });\nvar UP = 0;\nvar RIGHT = 1;\nvar DOWN = 2;\nvar LEFT = 3;\n\n\n//# sourceURL=webpack://matikka-mato/./src/types.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;